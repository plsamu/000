# 002 - databases

## Do not

### Keep the db connection opened

{% embed url="https://stackoverflow.com/questions/4111594/why-always-close-database-connection" %}

{% hint style="info" %}
**You should:**

1. Open connections as late as possible
2. Close connections as soon as possible
{% endhint %}

### Use tokio::main inside another tokio::main

{% embed url="https://stackoverflow.com/questions/62536566/how-can-i-create-a-tokio-runtime-inside-another-tokio-runtime-without-getting-th" %}

{% hint style="danger" %}
Do not call a tokio::main inside another tokio::main
{% endhint %}

```rust
use tokio; // 1.0.2

#[tokio::main]
async fn inner_example() {}

#[tokio::main]
async fn main() {
    inner_example();
}
```
